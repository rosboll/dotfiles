set -g base-index 1
set -g pane-base-index 1
###############################################################
#             CUSTOM ERGONOMICS FOR SCANDINAVIAN KBD          #
###############################################################

# 1. Set copy mode to use vi keybindings
set-window-option -g mode-keys vi

# 2. Rebind the [ (bracket) key to v to enter copy mode
#    Workflow: (Prefix) then v to enter scroll/copy mode
bind-key v copy-mode

###############################################################
#              SYSTEM CLIPBOARD INTEGRATION                   #
###############################################################

# Set the command used to copy the text selection to the system clipboard
# This determines which external tool tmux pipes the text to (pbcopy on Mac, xclip/xsel on Linux)
# Note: For Linux, ensure you have 'xclip' or 'xsel' installed.
# For macOS, ensure you have 'reattach-to-user-namespace' installed (e.g., via Homebrew).
if-shell "uname | grep -q Darwin" {
    # macOS (uses built-in pbcopy with reattach-to-user-namespace)
    bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
    bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "reattach-to-user-namespace pbcopy"
} {
    # Linux (uses xclip - selection clipboard)
    # The '|' is used to pipe text to *two* clipboards for compatibility (primary and system).
    bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "xclip -i -selection clipboard"
    bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "xclip -i -selection clipboard"
}

# 3. Configure vi-style selection keys in copy mode:
#    - v: Begin selection (Visual Mode)
#    - y: Yank (copy to clipboard) and exit copy mode
bind-key -T copy-mode-vi v send-keys -X begin-selection

